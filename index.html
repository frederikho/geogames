<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Learn geography by guessing which countries border each other">
    <title>Who Borders Who? - Geography Game</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="stylesheet" href="/src/styles.css">
</head>
<body>
    <div class="game-container">
        <!-- Header -->
        <header>
            <h1>Who Borders Who?</h1>
            <div class="header-actions">
                <button id="settings-btn" class="btn-icon" aria-label="Settings" title="Settings">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 12.5C11.3807 12.5 12.5 11.3807 12.5 10C12.5 8.61929 11.3807 7.5 10 7.5C8.61929 7.5 7.5 8.61929 7.5 10C7.5 11.3807 8.61929 12.5 10 12.5Z" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M17.5 10.8333V9.16667L15.6833 8.66667C15.5167 8.16667 15.3 7.7 15.0333 7.26667L15.8833 5.61667L14.6333 4.36667L12.9833 5.21667C12.55 4.95 12.0833 4.73333 11.5833 4.56667L11.0833 2.75H9.41667L8.91667 4.56667C8.41667 4.73333 7.95 4.95 7.51667 5.21667L5.86667 4.36667L4.61667 5.61667L5.46667 7.26667C5.2 7.7 4.98333 8.16667 4.81667 8.66667L3 9.16667V10.8333L4.81667 11.3333C4.98333 11.8333 5.2 12.3 5.46667 12.7333L4.61667 14.3833L5.86667 15.6333L7.51667 14.7833C7.95 15.05 8.41667 15.2667 8.91667 15.4333L9.41667 17.25H11.0833L11.5833 15.4333C12.0833 15.2667 12.55 15.05 12.9833 14.7833L14.6333 15.6333L15.8833 14.3833L15.0333 12.7333C15.3 12.3 15.5167 11.8333 15.6833 11.3333L17.5 10.8333Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <div class="score-container">
                    <div class="score-box">
                        <span class="score-label">Round</span>
                        <div class="score-value" id="round-number">1</div>
                    </div>
                    <div class="score-box">
                        <span class="score-label">Score</span>
                        <div class="score-value">
                            <span id="score">0</span>
                            <span id="score-delta" class="score-delta"></span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Loading State -->
        <div id="loading-state" class="loading">
            <div class="loading-spinner"></div>
            <p>Loading country data...</p>
        </div>

        <!-- Question Card -->
        <div id="question-card" class="question-card hidden">
            <p class="question-prompt">Name the neighbors of</p>
            <h2 class="country-name" id="target-country"></h2>
            <div class="question-meta">
                <div class="meta-item">
                    This country has <span class="meta-highlight" id="neighbor-count">0</span> neighbors
                </div>
                <div class="meta-item progress-indicator" id="progress-indicator">
                    Found: <span class="meta-highlight" id="found-count">0</span> of <span class="meta-highlight" id="total-count">0</span>
                </div>
            </div>
        </div>

        <!-- Input Section -->
        <div id="input-section" class="input-section hidden">
            <div class="chips-container" id="chips-container" aria-live="polite">
                <!-- Chips will be added here dynamically -->
            </div>

            <div class="input-wrapper">
                <label for="country-input" class="sr-only">Enter country name</label>
                <input
                    type="text"
                    id="country-input"
                    class="country-input"
                    placeholder="Type a country name..."
                    autocomplete="off"
                    aria-autocomplete="list"
                    aria-controls="autocomplete-dropdown"
                    aria-expanded="false"
                />
                <div id="autocomplete-dropdown" class="autocomplete-dropdown hidden" role="listbox">
                    <!-- Dropdown items will be added here dynamically -->
                </div>
            </div>
        </div>

        <!-- Actions -->
        <div id="actions" class="actions hidden">
            <button id="submit-btn" class="btn btn-primary">
                Submit Answers
            </button>
            <button id="next-round-btn" class="btn btn-secondary hidden">
                Next Round
            </button>
        </div>

        <!-- Map Container -->
        <div id="map-container" class="map-container hidden">
            <svg id="map-svg"></svg>
        </div>

        <div id="map-legend" class="map-legend hidden">
            <div class="legend-item">
                <div class="legend-color target"></div>
                <span>Target Country</span>
            </div>
            <div class="legend-item">
                <div class="legend-color correct"></div>
                <span>You Guessed</span>
            </div>
            <div class="legend-item">
                <div class="legend-color revealed"></div>
                <span>You Missed</span>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settings-modal" class="modal-overlay hidden">
            <div class="modal">
                <div class="modal-header">
                    <h3 class="modal-title">Settings</h3>
                    <button id="close-settings-btn" class="btn-icon" aria-label="Close">Ã—</button>
                </div>
                <div class="modal-content settings-content">
                    <div class="settings-section">
                        <h4>Game Mode</h4>
                        <p class="settings-description">Choose which countries to include in the game</p>
                        <div id="region-options" class="region-options">
                            <!-- Radio buttons will be added dynamically -->
                        </div>
                    </div>
                    <div class="settings-section">
                        <h4>About</h4>
                        <p class="settings-info">
                            This game features <strong>164 countries</strong> from around the world.
                            Only <strong>land neighbors</strong> count (not maritime borders).
                            Microstates and very small countries were excluded.
                        </p>
                        <p class="settings-info" style="margin-top: 1rem;">
                            Geographic data from <a href="https://www.naturalearthdata.com/" target="_blank" rel="noopener">Natural Earth</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer>
            <p><strong>Who Borders Who?</strong> - A geography learning game</p>
        </footer>
    </div>

    <script type="module" src="/src/main.js"></script>
    <script data-goatcounter="https://frederikho.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>
</body>
</html>
